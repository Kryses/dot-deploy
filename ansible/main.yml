# Main Playbook
---
- name: Main Playbook
  hosts: localhost
  become: false
  gather_facts: true
  vars:
    custom_folder_path: "~/.config/nvim/lua/custom"
  tasks:
    - name: System Installs and Staging
      block:
        - name: Staging
          ansible.builtin.include_tasks: "staging/{{ item }}"
          with_items:
            - "requirements.yml"
            - "folders.yml"
            - "git.yml"

    - name: Load Configs
      ansible.builtin.include_tasks: config/load-configs.yml

    - name: Configure TMUX
      ansible.builtin.include_tasks: config/tmux.yml

    - name: Custom Builds & Installs
      block:
        - name: Custom Installs
          ansible.builtin.include_tasks: "installs/{{ item.file }}"
          with_items:
            - {file: "zsh.yml"}
            - {file: "node.yml"}
            - {file: "fonts.yml"}
            - {file: "tmux.yml"}
            - {file: "nvim.yml"}
            - {file: "nnn.yml"}
            - {file: "nvchad.yml"}
