#!/usr/bin/bash
set -e

DOTFILES_DIR="$HOME/.dotfiles"
SSH_DIR="$HOME/.ssh"
echo $DOTFILES_DIR
echo $SSH_DIR

if ! [ -x "$(command -v ansible)" ]; then
	sudo apt install -y  ansible
fi

if [[ -f "$DOTFILE_DIR/ansible/roles/requirements.yml" ]]; then
	cd "$DOTFILES_DIR/ansible/roles"
	ansible-galaxy install -r requirements.yml
fi

cd "$DOTFILES_DIR"
ansible-playbook --diff "$DOTFILES_DIR/ansible/main.yml" --ask-become-pass
