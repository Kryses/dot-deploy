# Build NeoVim
---
- name: Check NeoVim installed
  become: false
  command: which nvim
  register: nvim_check
  ignore_errors: yes

- name: Clone Neo Vim
  git:
    repo: https://github.com/neovim/neovim.git
    version: stable
    dest: "{{ user_build_dir.path }}/neovim"
  when: nvim_check.rc != 0

- name: Build NeoVim
  shell: "make CMAKE_BUILD_TYPE=RelWithDebInfo CMAKE_INSTALL_PREFIX={{ user_bin_dir.path }}" 
  become: false
  args:
    chdir: "{{ user_build_dir.path }}/neovim"
  when: nvim_check.rc != 0

- name: Install NeoVim
  become: false
  shell: "make install"
  args:
    chdir: "{{ user_build_dir.path }}/neovim"
  when: nvim_check.rc != 0

